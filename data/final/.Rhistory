# Run from here
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni.csv", header=TRUE, stringsAsFactors=FALSE)
data2002 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2003 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2003.csv", header=TRUE, stringsAsFactors=FALSE)
data2004 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2004.csv", header=TRUE, stringsAsFactors=FALSE)
data2005 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2005.csv", header=TRUE, stringsAsFactors=FALSE)
data2006 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2006.csv", header=TRUE, stringsAsFactors=FALSE)
data2007 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2007.csv", header=TRUE, stringsAsFactors=FALSE)
data2008 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdid_nycma_yearly_boroughmuni_2008.csv", header=TRUE, stringsAsFactors=FALSE)
# Setup data
setup = panel.matrices(data)
setup2002 = panel.matrices(data2002)
setup2003 = panel.matrices(data2003)
setup2004 = panel.matrices(data2004)
setup2005 = panel.matrices(data2005)
setup2006 = panel.matrices(data2006)
setup2007 = panel.matrices(data2007)
setup2008 = panel.matrices(data2008)
# Estimates
tau.hat = synthdid_estimate(setup$Y, setup$N0, setup$T0)
tau.hat.2002 = synthdid_estimate(setup2002$Y, setup2002$N0, setup2002$T0)
tau.hat.2003 = synthdid_estimate(setup2003$Y, setup2003$N0, setup2003$T0)
tau.hat.2004 = synthdid_estimate(setup2004$Y, setup2004$N0, setup2004$T0)
tau.hat.2005 = synthdid_estimate(setup2005$Y, setup2005$N0, setup2005$T0)
tau.hat.2006 = synthdid_estimate(setup2006$Y, setup2006$N0, setup2006$T0)
tau.hat.2007 = synthdid_estimate(setup2007$Y, setup2007$N0, setup2007$T0)
tau.hat.2008 = synthdid_estimate(setup2008$Y, setup2008$N0, setup2008$T0)
# Export TEs and conduct inference
estimates = c(synthdid_effect_curve(tau.hat.2002),synthdid_effect_curve(tau.hat.2003),synthdid_effect_curve(tau.hat.2004),synthdid_effect_curve(tau.hat.2005),synthdid_effect_curve(tau.hat.2006),synthdid_effect_curve(tau.hat.2007),synthdid_effect_curve(tau.hat.2008))
var = c(vcov(tau.hat.2002,se.method='placebo'),vcov(tau.hat.2003,se.method='placebo'),vcov(tau.hat.2004,se.method='placebo'),vcov(tau.hat.2005,se.method='placebo'),vcov(tau.hat.2006,se.method='placebo'),vcov(tau.hat.2007,se.method='placebo'),vcov(tau.hat.2008,se.method='placebo'))
year = c(2002:2008)
estimates <- data.frame(estimates,var,year)
write.csv(estimates,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdidestimates.csv",row.names=FALSE)
# Export weights
oweights = synthdid_controls(tau.hat,mass=1)
oweights.2002 = synthdid_controls(tau.hat.2002,mass=1)
oweights.2003 = synthdid_controls(tau.hat.2003,mass=1)
oweights.2004 = synthdid_controls(tau.hat.2004,mass=1)
oweights.2005 = synthdid_controls(tau.hat.2005,mass=1)
oweights.2006 = synthdid_controls(tau.hat.2006,mass=1)
oweights.2007 = synthdid_controls(tau.hat.2007,mass=1)
oweights.2008 = synthdid_controls(tau.hat.2008,mass=1)
write.csv(oweights,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights.csv",row.names=TRUE)
write.csv(oweights.2002,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2002.csv",row.names=TRUE)
write.csv(oweights.2003,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2003.csv",row.names=TRUE)
write.csv(oweights.2004,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2004.csv",row.names=TRUE)
write.csv(oweights.2005,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2005.csv",row.names=TRUE)
write.csv(oweights.2006,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2006.csv",row.names=TRUE)
write.csv(oweights.2007,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2007.csv",row.names=TRUE)
write.csv(oweights.2008,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2008.csv",row.names=TRUE)
lweights = synthdid_controls(tau.hat,weight.type='lambda',mass=1)
lweights.2002 = synthdid_controls(tau.hat.2002,weight.type='lambda',mass=1)
lweights.2003 = synthdid_controls(tau.hat.2003,weight.type='lambda',mass=1)
lweights.2004 = synthdid_controls(tau.hat.2004,weight.type='lambda',mass=1)
lweights.2005 = synthdid_controls(tau.hat.2005,weight.type='lambda',mass=1)
lweights.2006 = synthdid_controls(tau.hat.2006,weight.type='lambda',mass=1)
lweights.2007 = synthdid_controls(tau.hat.2007,weight.type='lambda',mass=1)
lweights.2008 = synthdid_controls(tau.hat.2008,weight.type='lambda',mass=1)
write.csv(lweights,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights.csv",row.names=TRUE)
write.csv(lweights.2002,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2002.csv",row.names=TRUE)
write.csv(lweights.2003,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2003.csv",row.names=TRUE)
write.csv(lweights.2004,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2004.csv",row.names=TRUE)
write.csv(lweights.2005,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2005.csv",row.names=TRUE)
write.csv(lweights.2006,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2006.csv",row.names=TRUE)
write.csv(lweights.2007,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2007.csv",row.names=TRUE)
write.csv(lweights.2008,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2008.csv",row.names=TRUE)
# Option to create synthetic control images using their package in R or instead in Stata
# Installation of packages
#install.packages("devtools")
#install.package("Rtools")
#devtools::install_github("synth-inference/synthdid")
#install.packages("ggplot2")
rm(list = ls())
# Run from here
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
data2002 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2003 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2003.csv", header=TRUE, stringsAsFactors=FALSE)
data2004 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2004.csv", header=TRUE, stringsAsFactors=FALSE)
data2005 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2005.csv", header=TRUE, stringsAsFactors=FALSE)
data2006 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2006.csv", header=TRUE, stringsAsFactors=FALSE)
data2007 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2007.csv", header=TRUE, stringsAsFactors=FALSE)
data2008 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2008.csv", header=TRUE, stringsAsFactors=FALSE)
# Setup data
setup = panel.matrices(data)
setup2002 = panel.matrices(data2002)
setup2003 = panel.matrices(data2003)
setup2004 = panel.matrices(data2004)
setup2005 = panel.matrices(data2005)
setup2006 = panel.matrices(data2006)
setup2007 = panel.matrices(data2007)
setup2008 = panel.matrices(data2008)
# Estimates
tau.hat = synthdid_estimate(setup$Y, setup$N0, setup$T0)
test = vcov(tau.hat)
View(test)
estimates = synthdid_effect_curve(tau.hat)
test2 = vcov(estimates,se.method='placebo')
View(data)
View(test)
# Installation of packages
#install.packages("devtools")
#install.package("Rtools")
#devtools::install_github("synth-inference/synthdid")
#install.packages("ggplot2")
rm(list = ls())
# Run from here
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
data2002 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2003 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2003.csv", header=TRUE, stringsAsFactors=FALSE)
data2004 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2004.csv", header=TRUE, stringsAsFactors=FALSE)
data2005 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2005.csv", header=TRUE, stringsAsFactors=FALSE)
data2006 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2006.csv", header=TRUE, stringsAsFactors=FALSE)
data2007 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2007.csv", header=TRUE, stringsAsFactors=FALSE)
data2008 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2008.csv", header=TRUE, stringsAsFactors=FALSE)
# Setup data
setup = panel.matrices(data)
setup2002 = panel.matrices(data2002)
setup2003 = panel.matrices(data2003)
setup2004 = panel.matrices(data2004)
setup2005 = panel.matrices(data2005)
setup2006 = panel.matrices(data2006)
setup2007 = panel.matrices(data2007)
setup2008 = panel.matrices(data2008)
# Estimates
tau.hat = synthdid_estimate(setup$Y, setup$N0, setup$T0)
tau.hat.2002 = synthdid_estimate(setup2002$Y, setup2002$N0, setup2002$T0)
tau.hat.2003 = synthdid_estimate(setup2003$Y, setup2003$N0, setup2003$T0)
tau.hat.2004 = synthdid_estimate(setup2004$Y, setup2004$N0, setup2004$T0)
tau.hat.2005 = synthdid_estimate(setup2005$Y, setup2005$N0, setup2005$T0)
tau.hat.2006 = synthdid_estimate(setup2006$Y, setup2006$N0, setup2006$T0)
tau.hat.2007 = synthdid_estimate(setup2007$Y, setup2007$N0, setup2007$T0)
tau.hat.2008 = synthdid_estimate(setup2008$Y, setup2008$N0, setup2008$T0)
# Export TEs and conduct inference
estimates = c(synthdid_effect_curve(tau.hat.2002),synthdid_effect_curve(tau.hat.2003),synthdid_effect_curve(tau.hat.2004),synthdid_effect_curve(tau.hat.2005),synthdid_effect_curve(tau.hat.2006),synthdid_effect_curve(tau.hat.2007),synthdid_effect_curve(tau.hat.2008))
var = c(vcov(tau.hat.2002,se.method='placebo',replications = 200),vcov(tau.hat.2003,se.method='placebo',replications = 200),vcov(tau.hat.2004,se.method='placebo',replications = 200),vcov(tau.hat.2005,se.method='placebo',replications = 200),vcov(tau.hat.2006,se.method='placebo',replications = 200),vcov(tau.hat.2007,se.method='placebo',replications = 200),vcov(tau.hat.2008,se.method='placebo',replications = 200))
year = c(2002:2008)
estimates <- data.frame(estimates,var,year)
write.csv(estimates,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\sdidestimates.csv",row.names=FALSE)
# Export weights
oweights = synthdid_controls(tau.hat,mass=1)
oweights.2002 = synthdid_controls(tau.hat.2002,mass=1)
oweights.2003 = synthdid_controls(tau.hat.2003,mass=1)
oweights.2004 = synthdid_controls(tau.hat.2004,mass=1)
oweights.2005 = synthdid_controls(tau.hat.2005,mass=1)
oweights.2006 = synthdid_controls(tau.hat.2006,mass=1)
oweights.2007 = synthdid_controls(tau.hat.2007,mass=1)
oweights.2008 = synthdid_controls(tau.hat.2008,mass=1)
write.csv(oweights,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights.csv",row.names=TRUE)
write.csv(oweights.2002,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2002.csv",row.names=TRUE)
write.csv(oweights.2003,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2003.csv",row.names=TRUE)
write.csv(oweights.2004,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2004.csv",row.names=TRUE)
write.csv(oweights.2005,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2005.csv",row.names=TRUE)
write.csv(oweights.2006,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2006.csv",row.names=TRUE)
write.csv(oweights.2007,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2007.csv",row.names=TRUE)
write.csv(oweights.2008,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\oweights2008.csv",row.names=TRUE)
lweights = synthdid_controls(tau.hat,weight.type='lambda',mass=1)
lweights.2002 = synthdid_controls(tau.hat.2002,weight.type='lambda',mass=1)
lweights.2003 = synthdid_controls(tau.hat.2003,weight.type='lambda',mass=1)
lweights.2004 = synthdid_controls(tau.hat.2004,weight.type='lambda',mass=1)
lweights.2005 = synthdid_controls(tau.hat.2005,weight.type='lambda',mass=1)
lweights.2006 = synthdid_controls(tau.hat.2006,weight.type='lambda',mass=1)
lweights.2007 = synthdid_controls(tau.hat.2007,weight.type='lambda',mass=1)
lweights.2008 = synthdid_controls(tau.hat.2008,weight.type='lambda',mass=1)
write.csv(lweights,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights.csv",row.names=TRUE)
write.csv(lweights.2002,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2002.csv",row.names=TRUE)
write.csv(lweights.2003,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2003.csv",row.names=TRUE)
write.csv(lweights.2004,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2004.csv",row.names=TRUE)
write.csv(lweights.2005,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2005.csv",row.names=TRUE)
write.csv(lweights.2006,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2006.csv",row.names=TRUE)
write.csv(lweights.2007,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2007.csv",row.names=TRUE)
write.csv(lweights.2008,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\lweights2008.csv",row.names=TRUE)
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
setuppl = panel.matrices(placebo)
View(placebo)
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
setuppl = panel.matrices(placebo)
View(placebo)
pl_temp = df[ , c(1,2,3,4)]
pl_temp = placebo[ , c(1,2,3,4)]
View(pl_temp)
setuppl = panel.matrices(pl_temp)
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
pl_temp = placebo[ , c(1,2,3,4)]
setuppl = panel.matrices(pl_temp)
View(setuppl)
View(setuppl)
taupl.hat = synthdid_estimate(setuppl$Y, setuppl$N0, setuppl$T0)
placeboest = synthdid_effect_curve(taupl.hat)
placeboest = rbind(synthdid_effect_curve(taupl.hat))
View(placeboest)
placeboest = rbind(synthdid_effect_curve(taupl.hat))
View(placeboest)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
View(placeboest)
View(placeboest)
rm placeboest
rm(placeboest)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
placeboest = c(2002:2008) #initialize
pl_temp = placebo[ , c(1,2,3,4)]
setuppl = panel.matrices(pl_temp)
taupl.hat = synthdid_estimate(setuppl$Y, setuppl$N0, setuppl$T0)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
View(placeboest)
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
placeboest = c(2002:2008) #initialize
for (i in 4:203)
{
pl_temp = placebo[ , c(1,2,3,i)]
setuppl = panel.matrices(pl_temp)
taupl.hat = synthdid_estimate(setuppl$Y, setuppl$N0, setuppl$T0)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
}
View(placeboest)
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
placeboest = c(2002:2008) #initialize
for (i in 4:203)
{
pl_temp = placebo[ , c(1,2,3,i)]
setuppl = panel.matrices(pl_temp)
taupl.hat = synthdid_estimate(setuppl$Y, setuppl$N0, setuppl$T0)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
}
placebo <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
placeboest = c(2002:2008) #initialize
for (i in 4:203)
{
pl_temp = placebo[ , c(1,2,3,i)]
setuppl = panel.matrices(pl_temp)
taupl.hat = synthdid_estimate(setuppl$Y, setuppl$N0, setuppl$T0)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
}
View(placeboest)
View(estimates)
mean = rowMeans(placeboest)
placeboest = placeboest(-c(1))
placeboest = placeboest[-c(1), ]
mean = columnMeans(placeboest)
mean = mean(placeboest)
mean = colMeans(placeboest)
placeboest2 = placeboest[ ,c(1)] - mean[1,1]
placeboest2 = placeboest[ ,c(1)] - mean[c(1),c(1)]
placeboest2 = placeboest[ ,c(1)] - mean[1]
View(placeboest)
placeboest2 = demean(placeboest)
placeboest2 = placeboest - mean
View(placeboest2)
-0.0146891634+mean[2]
-0.0146891634-mean[2]
0.0137671762-mean[1]
-0.0023383408-mean[1]
-0.0023383408-mean[2]
-0.0050385064-mean[1]
-0.0050385064-mean[2]
placeboest2 = placeboest[] - colMeans(placeboest[])[col(placeboest)]
test = colMeans(placeboest[])[col(placeboest)]
placeboest2 = placeboest[] - colMeans(placeboest[])[col(placeboest[])]
test = placeboest - placeboest2
View(test)
placeboest2 = placeboest^2
varplacebo = colMeans(placeboest2)
View(estimates)
placeboestimates <- data.frame(synthdid_effect_curve(tau.hat),varplacebo,year)
View(placeboestimates)
unstacked = synthdid_effect_curve(tau.hat)
unstackedestimates <- data.frame(unstacked,varplacebo,year)
View(unstackedestimates)
View(estimates)
write.csv(unstackedestimates,"C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\unstackedestimates.csv",row.names=FALSE)
# Installation of packages
#install.packages("devtools")
#install.package("Rtools")
#devtools::install_github("synth-inference/synthdid")
#install.packages("ggplot2")
rm(list = ls())
# Run from here
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
data2002 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2003 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2003.csv", header=TRUE, stringsAsFactors=FALSE)
data2004 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2004.csv", header=TRUE, stringsAsFactors=FALSE)
data2005 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2005.csv", header=TRUE, stringsAsFactors=FALSE)
data2006 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2006.csv", header=TRUE, stringsAsFactors=FALSE)
data2007 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2007.csv", header=TRUE, stringsAsFactors=FALSE)
data2008 <- read.csv("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingIncome\\Data\\final_sdid_2008.csv", header=TRUE, stringsAsFactors=FALSE)
# Setup data
setup = panel.matrices(data)
setup2002 = panel.matrices(data2002)
setup2003 = panel.matrices(data2003)
setup2004 = panel.matrices(data2004)
setup2005 = panel.matrices(data2005)
setup2006 = panel.matrices(data2006)
setup2007 = panel.matrices(data2007)
setup2008 = panel.matrices(data2008)
# Estimates
tau.hat = synthdid_estimate(setup$Y, setup$N0, setup$T0)
tau.hat.2002 = synthdid_estimate(setup2002$Y, setup2002$N0, setup2002$T0)
tau.hat.2003 = synthdid_estimate(setup2003$Y, setup2003$N0, setup2003$T0)
tau.hat.2004 = synthdid_estimate(setup2004$Y, setup2004$N0, setup2004$T0)
tau.hat.2005 = synthdid_estimate(setup2005$Y, setup2005$N0, setup2005$T0)
tau.hat.2006 = synthdid_estimate(setup2006$Y, setup2006$N0, setup2006$T0)
tau.hat.2007 = synthdid_estimate(setup2007$Y, setup2007$N0, setup2007$T0)
tau.hat.2008 = synthdid_estimate(setup2008$Y, setup2008$N0, setup2008$T0)
# Export TEs and conduct inference
breps = 500
estimates = c(synthdid_effect_curve(tau.hat.2002),synthdid_effect_curve(tau.hat.2003),synthdid_effect_curve(tau.hat.2004),synthdid_effect_curve(tau.hat.2005),synthdid_effect_curve(tau.hat.2006),synthdid_effect_curve(tau.hat.2007),synthdid_effect_curve(tau.hat.2008))
oweights = synthdid_controls(tau.hat,mass=1)
# Installation of packages
#install.packages("devtools")
#install.package("Rtools")
#devtools::install_github("synth-inference/synthdid")
#install.packages("ggplot2")
rm(list = ls())
# Run from here
Sys.setenv(HOME="C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingHabits\\data\\final")
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data <- read.csv("final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
data <- read.csv("final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
HOME
Sys.setenv(HOME="C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingHabits\\data\\final")
getwd()
setwd("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingHabits\\data\\final")
data <- read.csv("final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
# Installation of packages
#install.packages("devtools")
#install.package("Rtools")
#devtools::install_github("synth-inference/synthdid")
#install.packages("ggplot2")
rm(list = ls())
# Run from here
setwd("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingHabits\\data\\final")
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data <- read.csv("final_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
data2002 <- read.csv("final_sdid_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2003 <- read.csv("final_sdid_2003.csv", header=TRUE, stringsAsFactors=FALSE)
data2004 <- read.csv("final_sdid_2004.csv", header=TRUE, stringsAsFactors=FALSE)
data2005 <- read.csv("final_sdid_2005.csv", header=TRUE, stringsAsFactors=FALSE)
data2006 <- read.csv("final_sdid_2006.csv", header=TRUE, stringsAsFactors=FALSE)
data2007 <- read.csv("final_sdid_2007.csv", header=TRUE, stringsAsFactors=FALSE)
data2008 <- read.csv("final_sdid_2008.csv", header=TRUE, stringsAsFactors=FALSE)
# Setup data
setup = panel.matrices(data)
setup2002 = panel.matrices(data2002)
setup2003 = panel.matrices(data2003)
setup2004 = panel.matrices(data2004)
setup2005 = panel.matrices(data2005)
setup2006 = panel.matrices(data2006)
setup2007 = panel.matrices(data2007)
setup2008 = panel.matrices(data2008)
# Estimates
tau.hat = synthdid_estimate(setup$Y, setup$N0, setup$T0)
tau.hat.2002 = synthdid_estimate(setup2002$Y, setup2002$N0, setup2002$T0)
tau.hat.2003 = synthdid_estimate(setup2003$Y, setup2003$N0, setup2003$T0)
tau.hat.2004 = synthdid_estimate(setup2004$Y, setup2004$N0, setup2004$T0)
tau.hat.2005 = synthdid_estimate(setup2005$Y, setup2005$N0, setup2005$T0)
tau.hat.2006 = synthdid_estimate(setup2006$Y, setup2006$N0, setup2006$T0)
tau.hat.2007 = synthdid_estimate(setup2007$Y, setup2007$N0, setup2007$T0)
tau.hat.2008 = synthdid_estimate(setup2008$Y, setup2008$N0, setup2008$T0)
# Export TEs and conduct inference
breps = 500
estimates = c(synthdid_effect_curve(tau.hat.2002),synthdid_effect_curve(tau.hat.2003),synthdid_effect_curve(tau.hat.2004),synthdid_effect_curve(tau.hat.2005),synthdid_effect_curve(tau.hat.2006),synthdid_effect_curve(tau.hat.2007),synthdid_effect_curve(tau.hat.2008))
var = c(vcov(tau.hat.2002,se.method='placebo',replications = breps),vcov(tau.hat.2003,se.method='placebo',replications = breps),vcov(tau.hat.2004,se.method='placebo',replications = breps),vcov(tau.hat.2005,se.method='placebo',replications = breps),vcov(tau.hat.2006,se.method='placebo',replications = breps),vcov(tau.hat.2007,se.method='placebo',replications = breps),vcov(tau.hat.2008,se.method='placebo',replications = breps))
year = c(2002:2008)
estimates <- data.frame(estimates,var,year)
write.csv(estimates,"sdidestimates.csv",row.names=FALSE)
# Export weights
oweights = synthdid_controls(tau.hat,mass=1)
oweights.2002 = synthdid_controls(tau.hat.2002,mass=1)
oweights.2003 = synthdid_controls(tau.hat.2003,mass=1)
oweights.2004 = synthdid_controls(tau.hat.2004,mass=1)
oweights.2005 = synthdid_controls(tau.hat.2005,mass=1)
oweights.2006 = synthdid_controls(tau.hat.2006,mass=1)
oweights.2007 = synthdid_controls(tau.hat.2007,mass=1)
oweights.2008 = synthdid_controls(tau.hat.2008,mass=1)
write.csv(oweights,"oweights.csv",row.names=TRUE)
write.csv(oweights.2002,"oweights2002.csv",row.names=TRUE)
write.csv(oweights.2003,"oweights2003.csv",row.names=TRUE)
write.csv(oweights.2004,"oweights2004.csv",row.names=TRUE)
write.csv(oweights.2005,"oweights2005.csv",row.names=TRUE)
write.csv(oweights.2006,"oweights2006.csv",row.names=TRUE)
write.csv(oweights.2007,"oweights2007.csv",row.names=TRUE)
write.csv(oweights.2008,"oweights2008.csv",row.names=TRUE)
lweights = synthdid_controls(tau.hat,weight.type='lambda',mass=1)
lweights.2002 = synthdid_controls(tau.hat.2002,weight.type='lambda',mass=1)
lweights.2003 = synthdid_controls(tau.hat.2003,weight.type='lambda',mass=1)
lweights.2004 = synthdid_controls(tau.hat.2004,weight.type='lambda',mass=1)
lweights.2005 = synthdid_controls(tau.hat.2005,weight.type='lambda',mass=1)
lweights.2006 = synthdid_controls(tau.hat.2006,weight.type='lambda',mass=1)
lweights.2007 = synthdid_controls(tau.hat.2007,weight.type='lambda',mass=1)
lweights.2008 = synthdid_controls(tau.hat.2008,weight.type='lambda',mass=1)
write.csv(lweights,"lweights.csv",row.names=TRUE)
write.csv(lweights.2002,"lweights2002.csv",row.names=TRUE)
write.csv(lweights.2003,"lweights2003.csv",row.names=TRUE)
write.csv(lweights.2004,"lweights2004.csv",row.names=TRUE)
write.csv(lweights.2005,"lweights2005.csv",row.names=TRUE)
write.csv(lweights.2006,"lweights2006.csv",row.names=TRUE)
write.csv(lweights.2007,"lweights2007.csv",row.names=TRUE)
write.csv(lweights.2008,"lweights2008.csv",row.names=TRUE)
# Non-stacked placebo inference
placebo <- read.csv("placebo_sdid.csv", header=TRUE, stringsAsFactors=FALSE)
placeboest = c(2002:2008) #initialize
for (i in 4:503)
{
pl_temp = placebo[ , c(1,2,3,i)]
setuppl = panel.matrices(pl_temp)
taupl.hat = synthdid_estimate(setuppl$Y, setuppl$N0, setuppl$T0)
placeboest = rbind(placeboest,synthdid_effect_curve(taupl.hat))
}
placeboest = placeboest[-c(1), ]
placeboest2 = placeboest[] - colMeans(placeboest[])[col(placeboest[])]
placeboest2 = placeboest2^2
varplacebo = colMeans(placeboest2)
unstacked = synthdid_effect_curve(tau.hat)
unstackedestimates <- data.frame(unstacked,varplacebo,year)
write.csv(unstackedestimates,"unstackedestimates.csv",row.names=FALSE)
# Installation of packages
#install.packages("devtools")
#install.package("Rtools")
#devtools::install_github("synth-inference/synthdid")
#install.packages("ggplot2")
rm(list = ls())
# Run from here
setwd("C:\\Users\\brewe\\Dropbox\\PaperIdeas\\RecyclingHabits\\data\\final")
library(synthdid)
library(ggplot2)
set.seed(12345)
# Load data
data2002_a <- read.csv("final_sdid_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2002 <- read.csv("partialed_sdid_2002.csv", header=TRUE, stringsAsFactors=FALSE)
data2003 <- read.csv("partialed_sdid_2003.csv", header=TRUE, stringsAsFactors=FALSE)
data2004 <- read.csv("partialed_sdid_2004.csv", header=TRUE, stringsAsFactors=FALSE)
data2005 <- read.csv("partialed_sdid_2005.csv", header=TRUE, stringsAsFactors=FALSE)
data2006 <- read.csv("partialed_sdid_2006.csv", header=TRUE, stringsAsFactors=FALSE)
data2007 <- read.csv("partialed_sdid_2007.csv", header=TRUE, stringsAsFactors=FALSE)
data2008 <- read.csv("partialed_sdid_2008.csv", header=TRUE, stringsAsFactors=FALSE)
# Setup data
setup2002 = panel.matrices(data2002)
setup2003 = panel.matrices(data2003)
setup2004 = panel.matrices(data2004)
setup2005 = panel.matrices(data2005)
setup2006 = panel.matrices(data2006)
setup2007 = panel.matrices(data2007)
setup2008 = panel.matrices(data2008)
# Estimates
tau.hat.2002 = synthdid_estimate(setup2002$Y, setup2002$N0, setup2002$T0)
tau.hat.2003 = synthdid_estimate(setup2003$Y, setup2003$N0, setup2003$T0)
tau.hat.2004 = synthdid_estimate(setup2004$Y, setup2004$N0, setup2004$T0)
tau.hat.2005 = synthdid_estimate(setup2005$Y, setup2005$N0, setup2005$T0)
tau.hat.2006 = synthdid_estimate(setup2006$Y, setup2006$N0, setup2006$T0)
tau.hat.2007 = synthdid_estimate(setup2007$Y, setup2007$N0, setup2007$T0)
tau.hat.2008 = synthdid_estimate(setup2008$Y, setup2008$N0, setup2008$T0)
# Export TEs and conduct inference
breps = 500
estimates = c(synthdid_effect_curve(tau.hat.2002),synthdid_effect_curve(tau.hat.2003),synthdid_effect_curve(tau.hat.2004),synthdid_effect_curve(tau.hat.2005),synthdid_effect_curve(tau.hat.2006),synthdid_effect_curve(tau.hat.2007),synthdid_effect_curve(tau.hat.2008))
var = c(vcov(tau.hat.2002,se.method='placebo',replications = breps),vcov(tau.hat.2003,se.method='placebo',replications = breps),vcov(tau.hat.2004,se.method='placebo',replications = breps),vcov(tau.hat.2005,se.method='placebo',replications = breps),vcov(tau.hat.2006,se.method='placebo',replications = breps),vcov(tau.hat.2007,se.method='placebo',replications = breps),vcov(tau.hat.2008,se.method='placebo',replications = breps))
year = c(2002:2008)
estimates <- data.frame(estimates,var,year)
write.csv(estimates,"partialedestimates.csv",row.names=FALSE)
# Export weights
oweights.2002 = synthdid_controls(tau.hat.2002,mass=1.1)
oweights.2003 = synthdid_controls(tau.hat.2003,mass=1.1)
oweights.2004 = synthdid_controls(tau.hat.2004,mass=1.1)
oweights.2005 = synthdid_controls(tau.hat.2005,mass=1.1)
oweights.2006 = synthdid_controls(tau.hat.2006,mass=1.1)
oweights.2007 = synthdid_controls(tau.hat.2007,mass=1.1)
oweights.2008 = synthdid_controls(tau.hat.2008,mass=1.1)
write.csv(oweights.2002,"partialed_oweights2002.csv",row.names=TRUE)
write.csv(oweights.2003,"partialed_oweights2003.csv",row.names=TRUE)
write.csv(oweights.2004,"partialed_oweights2004.csv",row.names=TRUE)
write.csv(oweights.2005,"partialed_oweights2005.csv",row.names=TRUE)
write.csv(oweights.2006,"partialed_oweights2006.csv",row.names=TRUE)
write.csv(oweights.2007,"partialed_oweights2007.csv",row.names=TRUE)
write.csv(oweights.2008,"partialed_oweights2008.csv",row.names=TRUE)
lweights.2002 = synthdid_controls(tau.hat.2002,weight.type='lambda',mass=1.1)
lweights.2003 = synthdid_controls(tau.hat.2003,weight.type='lambda',mass=1.1)
lweights.2004 = synthdid_controls(tau.hat.2004,weight.type='lambda',mass=1.1)
lweights.2005 = synthdid_controls(tau.hat.2005,weight.type='lambda',mass=1.1)
lweights.2006 = synthdid_controls(tau.hat.2006,weight.type='lambda',mass=1.1)
lweights.2007 = synthdid_controls(tau.hat.2007,weight.type='lambda',mass=1.1)
lweights.2008 = synthdid_controls(tau.hat.2008,weight.type='lambda',mass=1.1)
write.csv(lweights.2002,"partialed_lweights2002.csv",row.names=TRUE)
write.csv(lweights.2003,"partialed_lweights2003.csv",row.names=TRUE)
write.csv(lweights.2004,"partialed_lweights2004.csv",row.names=TRUE)
write.csv(lweights.2005,"partialed_lweights2005.csv",row.names=TRUE)
write.csv(lweights.2006,"partialed_lweights2006.csv",row.names=TRUE)
write.csv(lweights.2007,"partialed_lweights2007.csv",row.names=TRUE)
write.csv(lweights.2008,"partialed_lweights2008.csv",row.names=TRUE)
R.version
which R
which r
